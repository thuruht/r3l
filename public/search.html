<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search - R3L:F</title>
  <link rel="stylesheet" href="./css/rel-f-global.css">
  <link rel="stylesheet" href="./css/responsive-enhancements.css">
  <script src="./js/font-loader.js" defer></script>
  <script src="./js/utils/secure-api-helper.js" defer></script>
  <style>
    /* Compact header styles */
    .search-title {
      display: flex;
      align-items: center;
      margin-bottom: 1rem;
      gap: 0.5rem;
    }
    .search-title h1 {
      margin: 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .search-title p {
      margin: 0;
      font-size: var(--fs-lg);
      color: var(--text-secondary);
    }
  </style>
</head>
<body>
  <header>
    <div class="container">
      <!-- Navigation will be inserted by JavaScript -->
    </div>
  </header>

  <main class="container">
    <div class="search-title">
      <h1>
        <span class="material-icons" aria-hidden="true">search</span>
        Anti-Algorithmic Search
      </h1>
      <p>Find content without algorithmic influence</p>
    </div>

    <div class="search-container">
      <form id="search-form" class="search-form">
        <div class="search-input-group">
          <input type="text" id="search-query" class="search-input" placeholder="Search by keywords, tags, or file types..." autofocus>
          <button type="submit" class="search-button">
            <span class="material-icons">search</span>
          </button>
        </div>

        <div class="search-filters">
          <div class="filter-group">
            <h3>File Type</h3>
            <div class="flex gap-2 flex-wrap">
              <label class="flex items-center gap-1">
                <input type="checkbox" name="fileType" value="image">
                <span class="material-icons">image</span>
                Images
              </label>
              <label class="flex items-center gap-1">
                <input type="checkbox" name="fileType" value="audio">
                <span class="material-icons">audiotrack</span>
                Audio
              </label>
              <label class="flex items-center gap-1">
                <input type="checkbox" name="fileType" value="video">
                <span class="material-icons">videocam</span>
                Video
              </label>
              <label class="flex items-center gap-1">
                <input type="checkbox" name="fileType" value="document">
                <span class="material-icons">description</span>
                Documents
              </label>
              <label class="flex items-center gap-1">
                <input type="checkbox" name="fileType" value="code">
                <span class="material-icons">code</span>
                Code
              </label>
              <label class="flex items-center gap-1">
                <input type="checkbox" name="fileType" value="other">
                <span class="material-icons">insert_drive_file</span>
                Other
              </label>
            </div>
          </div>

          <div class="filter-group">
            <h3 id="time-frame-label">Time Frame</h3>
            <select id="time-frame" name="timeFrame" aria-labelledby="time-frame-label">
              <option value="all">All Time</option>
              <option value="day">Last 24 Hours</option>
              <option value="week" selected>Last 7 Days</option>
              <option value="month">Last 30 Days</option>
            </select>
          </div>

          <div class="filter-group">
            <h3>Sort By</h3>
            <div class="radio-group">
              <label>
                <input type="radio" name="sortBy" value="recent" checked>
                Most Recent
              </label>
              <label>
                <input type="radio" name="sortBy" value="size">
                File Size
              </label>
              <label>
                <input type="radio" name="sortBy" value="name">
                File Name
              </label>
            </div>
          </div>

          <div class="filter-group">
            <h3>Options</h3>
            <label class="flex items-center gap-1">
              <input type="checkbox" name="includeExpiring" checked>
              Include soon-to-expire content
            </label>
            <label class="flex items-center gap-1">
              <input type="checkbox" name="includeArchived">
              Include archived content
            </label>
          </div>
        </div>

        <div class="lurker-mode-toggle mt-4">
          <label for="anti-tracking-search">
            <span class="material-icons">visibility_off</span>
            Anti-Tracking Search
          </label>
          <input type="checkbox" id="anti-tracking-search" name="antiTracking" checked>
          <div id="anti-tracking-status" class="lurker-mode-status active">Active</div>
        </div>
        <small>When active, your search queries are not recorded and won't affect your profile or connections.</small>

        <div class="flex gap-2 mt-4">
          <button type="submit" class="btn">
            <span class="material-icons">search</span>
            Search
          </button>
          <button type="reset" class="btn btn-secondary">
            <span class="material-icons">clear</span>
            Reset
          </button>
        </div>
      </form>

      <div id="results-container" class="mt-4 hidden">
        <div class="results-header">
          <h2>Search Results</h2>
          <span id="results-count" class="results-count">0 results</span>
        </div>
        
        <div id="loading-results" class="p-4 text-center">
          <span class="material-icons" style="font-size: 48px;">hourglass_top</span>
          <p>Searching the Rel...</p>
        </div>

        <div id="no-results" class="p-4 text-center hidden">
          <span class="material-icons" style="font-size: 48px;">search_off</span>
          <h3>No Results Found</h3>
          <p>Try adjusting your search terms or filters to find more content.</p>
        </div>

        <div id="results-grid" class="file-grid p-4 hidden"></div>

        <div id="pagination" class="flex justify-center gap-2 p-4 hidden">
          <button id="prev-page" class="btn btn-secondary">
            <span class="material-icons">chevron_left</span>
            Previous
          </button>
          <span id="page-indicator">Page 1 of 1</span>
          <button id="next-page" class="btn btn-secondary">
            Next
            <span class="material-icons">chevron_right</span>
          </button>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <p class="footer-motto text-accent">"the rel is what you make it"</p>
    <div class="footer-links">
      <a href="index.html">Home</a> | 
      <a href="help.html">Help</a> | 
      <a href="about.html">About</a> | 
      <a href="sitemap.html">Site Map</a>
    </div>
  </footer>

  <!-- File Item Template -->
  <template id="result-item-template">
    <div class="file-item">
      <div class="file-icon">
        <span class="material-icons"></span>
      </div>
      <div class="file-name"></div>
      <div class="file-expiry"></div>
    </div>
  </template>

  <script type="module">
    import { initAccessibility } from './js/utils/ui-helpers.js';
    
    document.addEventListener('DOMContentLoaded', () => {
      initAccessibility();
    });
  </script>
  <script type="module" src="./js/search-page.js"></script>
</body>
</html>
